{
  "name": "WebScraping_to_WordPress",
  "nodes": [
    {
      "parameters": {
        "url": "={{$json[\"base_domain\"]}}",
        "responseFormat": "string",
        "options": {
          "timeout": 10000
        }
      },
      "name": "Fetch Website",
      "type": "n8n-nodes-base.httpRequest",
      "position": [400, 0],
      "typeVersion": 1,
      "id": "d10035f6-68a2-4fc5-a1ef-2b455ae36a2c"
    },
    {
      "parameters": {
        "values": {
          "string": [
            {
              "name": "base_domain",
              "value": "https://www.artificialintelligence-news.com/"
            }
          ]
        },
        "options": {}
      },
      "name": "Set URL",
      "type": "n8n-nodes-base.set",
      "position": [208, 0],
      "typeVersion": 1,
      "id": "96edede8-7b95-4f83-a2a9-7b53c6628270"
    },
    {
      "parameters": {
        "operation": "extractHtmlContent",
        "extractionValues": {
          "values": [
            {
              "key": "image",
              "cssSelector": "div img",
              "returnValue": "attribute",
              "attribute": "src",
              "returnArray": true
            },
            {
              "key": "post",
              "cssSelector": "h1 a"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.html",
      "typeVersion": 1.2,
      "position": [608, 0],
      "id": "849748a3-d5f2-4f6f-b9be-ccddce2b91e3",
      "name": "HTML"
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "weeks"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [0, 0],
      "id": "f170f77a-457d-4426-8b12-06a97e004daa",
      "name": "Schedule Trigger"
    },
    {
      "parameters": {
        "fieldsToAggregate": {
          "fieldToAggregate": [
            { "fieldToAggregate": "post" },
            { "fieldToAggregate": "image[2]" }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [1120, 0],
      "id": "c04a639f-713f-41b3-8062-86dd5294fa2f",
      "name": "Aggregate"
    },
    {
      "parameters": {
        "functionCode": "return [{json:{title: $node[\"AI Agent1\"].json.output.platform_posts.wordpress.Title,content:`<img src=\"${$node[\"Upload to WordPress1\"].json.link}\" style=\"max-width:100%;\" /><br/> ${$node[\"AI Agent1\"].json.output.platform_posts.wordpress.post}${$node[\"AI Agent1\"].json.output.platform_posts.wordpress.post} อ่านเพิ่มเติมได้ที่ :<a href=\"https://www.artificialintelligence-news.com/\">https://www.artificialintelligence-news.com/</a>`,status:\"publish\",categories:[18]}}];"
      },
      "id": "354760db-85e9-4c64-b267-3f19adfd4e56",
      "name": "Set Post Data1",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [848, 272]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://www.digitalnomadthai.com/wp-json/wp/v2/media",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBasicAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "content-disposition",
              "value": "=attachment; filename={{ $('Aggregate').item.json.image[2][0] }}"
            },
            { "name": "content-type", "value": "={{ $binary.data.mimeType }}" }
          ]
        },
        "sendBody": true,
        "contentType": "binaryData",
        "inputDataFieldName": "data",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [672, 272],
      "id": "e341d067-5369-4138-87cd-50300eb715e8",
      "name": "Upload to WordPress1",
      "credentials": {
        "httpBasicAuth": {
          "id": "",
          "name": "YOUR_WORDPRESS_AUTH"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://www.digitalnomadthai.com/wp-json/wp/v2/posts/{{ $json.id }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBasicAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            { "name": "Content-Type", "value": "application/json" }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "featured_media",
              "value": "={{ $('Upload to WordPress1').item.json.id }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [1168, 272],
      "id": "b1fa7af6-3705-4a92-a699-0765c7143c5f",
      "name": "Update Meta Data",
      "credentials": {
        "httpBasicAuth": {
          "id": "",
          "name": "YOUR_WORDPRESS_AUTH"
        }
      }
    },
    {
      "parameters": {
        "authentication": "basicAuth",
        "requestMethod": "POST",
        "url": "https://www.digitalnomadthai.com/wp-json/wp/v2/posts",
        "jsonParameters": true,
        "options": {},
        "bodyParametersJson": "={{ JSON.stringify($json) }}",
        "headerParametersJson": "=",
        "queryParametersJson": "="
      },
      "id": "684e5d73-133e-4c71-90cc-f6e7a8576245",
      "name": "Post to WordPress1",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 1,
      "position": [1008, 272],
      "credentials": {
        "httpBasicAuth": {
          "id": "",
          "name": "YOUR_WORDPRESS_AUTH"
        }
      }
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.0-flash-exp",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [16, 432],
      "id": "f4963a98-db93-46ad-bc00-3b52c9f2049b",
      "name": "Google Gemini Chat Model1",
      "credentials": {
        "googlePalmApi": {
          "id": "",
          "name": "YOUR_GEMINI_API_ACCOUNT"
        }
      }
    }
  ],
  "connections": {},
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "be1921a9-5c62-4108-ab98-2a282f11c654",
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "id": "eYoL5xFVR0zFPh9s",
  "tags": []
}
